<!DOCTYPE html>
<html>
    <head>
        <title>Timeline</title>
        <link rel="stylesheet" href="css/index.css">
        <link rel="stylesheet" href="css/profile.css">
    </head>
    <body>
        <div id="content">
            <header>
                <h1><a href="/">PokeAPI Client</a></h1>
                <form action="/pokemon">
                    
                    <div>
                        <input type="text" id="search" name="search" placeholder="Search by name..." value="" />
                        <button type="submit">Search</button>
                    </div>
    
                    <!-- <select name="history" id="history" onchange="loadSearch();">
                        <option value="null">History</option>
                    </select> -->
                    <input type="button" id="cart" onclick="window.location.assign('/cart')" value="Cart" />
                    <input type="button" id="history" onclick="logout()" value="Logout" />
                </form>
            </header>
            <div id="stuff">
                <div id="userInfo">
                    <h3 id="username"></h3>
                </div>
                <div id="timeline">
                    <template id="timelineNodeTemplate">
                        <div class="timelineNode">
                            <h2 class="tTime"></h2>
                            <p class="tType"></p>
                            <p class="tAbility"></p>
                            <p class="tMove"></p>
                            <p class="tHits"></p>
                            <button class="tButtonSearch">Search</button>
                            <button class="tButtonDelete">Delete</button>
                        </div>
                    </template>
                </div>
            </div>
            <footer>
                <p>Lachlan Butler - 2022</p>
            </footer>
        </div>
        <script src="js/htmlRequests.js"></script>
        <script src="js/timeline.js"></script>
        <script>
            getAllEvents();

            async function getUserInfo() {
                let res = getRequestSync('/accounts/getUserInfo');
                document.querySelector('#username').innerHTML = res[0].username + "'s timeline";
            }

            async function logout() {
                console.log('logging out.')
                let res = getRequestSync('/accounts/logout');

                console.log(res);
                window.location.assign('/');
            }

            getUserInfo();
        </script>
    </body>
</html>